{% extends 'dietitian_panel_base.html' %}
{% load static %}
{% block title %}Calendar{% endblock %}
{% block additional_stylesheets %}
    <link href="{% static "css/calendar.css" %}" rel="stylesheet">{% endblock %}
{% block additional_scripts %}
    <script src="{% static "js/calendar.js" %}"
            defer
            data-month></script>{% endblock %}
{% block information %}
    {#    {% if user.dietitianprofile %}#}
    {##}
    {#        {% for client in clients %}#}
    {#            <p>{{ client }}</p>#}
    {#        {% endfor %}#}
    {##}
    {#    {% elif user.clientprofile %}#}
    {##}
    {##}
    {#    {% endif %}#}
    {##}
    {#    <p>{{ name }}</p>#}
    {##}
    {#    <h1>Appointments:</h1>#}
    {##}
    {#    {% for appointment in appointments %}#}
    {#        <p>{{ appointment }} {{ appointment.date }} {{ appointment.event_duration }}</p>#}
    {##}
    {#    {% endfor %}#}
    {#    <a href="{% url 'panel:home' %}">#}
    {#        <button type="button">Home</button>#}
    {#    </a>#}
    <div class="calendar-container" data-container>
        <header>
            <div class="button" id="button-container">
                <div class="button month-button" id="month-button">
                    <button>{{ current_month }} {{ current_year }}</button>
                </div>
                <div class="button year-button" id="year-button" style="display: none;">
                    <button>{{ current_year }}</button>
                </div>
                <div class="button ten-years-button" id="ten-years-button" style="display: none;">
                    <button>2020-2030</button>
                </div>
            </div>
        </header>
        {#        <form action="{% url 'panel:show_calendar' %}" method="POST">#}
        {#            {% csrf_token %}#}
        {#            <select name="year">#}
        {#                {% for year in years %}#}
        {#                    <option value="{{ year }}" {% if year == selected_year %} selected {% endif %}>{{ year }}</option>#}
        {#                {% endfor %}#}
        {#            </select>#}
        {#            <select name="month">#}
        {#                {% for number, month in months.items %}#}
        {#                    <option value="{{ number }}" {% if number == selected_month %}#}
        {#                            selected {% endif %}>{{ month }}</option>#}
        {#                {% endfor %}#}
        {#            </select>#}
        {#            <button type="submit">SUBMIT</button>#}
        {#        </form>#}

        <div class="calendar">
            {% for weekday in weekdays %}
                <div class="weekday">{{ weekday }}</div>
            {% endfor %}
            {% for day in prev_days %}
                <div class="diff_days">{{ day }}</div>
            {% endfor %}
            {% for day in days %}
                <div {% if selected_year == current_date.year and selected_month == current_date.month and day == current_day_num %}class="current_day"{% endif %}>
                    {{ day }}
                    {% for appointment in appointments %}
                        {% if appointment.date.year == selected_year and appointment.date.month == selected_month and appointment.date.day == day %}
                            <div class="appointment" data-value="{{ appointment.pk }}" data-appointment>
                                <div class="time" data-value="{{ appointment.pk }}">14:30</div>
                                <div class="title" data-value="{{ appointment.pk }}">{{ appointment.title }}</div>
                                <div class="duration" data-value="{{ appointment.pk }}">
                                    Duration: {{ appointment.event_duration }}</div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endfor %}
            {% for day in next_days %}
                <div class="diff_days">{{ day }}</div>
            {% endfor %}
        </div>
    </div>
    <dialog data-dialog>
        <form method="POST">
            <button formmethod="dialog" type="submit">
                <i class="fa-solid fa-xmark"></i>
            </button>
            {% for appointment in appointments %}
                <div data-value="{{ appointment.pk }}" class="d-none" data-dialog-content>{{ appointment.title }}</div>
            {% endfor %}
            <input type="text">
            <button type="submit">SUBMIT</button>
        </form>
    </dialog>
{% endblock %}

